<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>BauzaGPT-AI</title>
<meta name="description" content="BÃºsqueda OSINT legal con entrega en PDF y acceso con Google.">
<link rel="preconnect" href="https://accounts.google.com">
<style>
  :root{
    --bg1:#0b1220; --bg2:#0a0f1d; --card:#111827; --text:#e5e7eb; --muted:#a3a3a3;
    --accent1:#c084fc; --accent2:#60a5fa; --btn:#1f2937; --btnHover:#374151; --ring:#8b5cf6;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(900px 600px at 50% -10%, #1a1440 0%, var(--bg1) 40%, #060913 100%),
      linear-gradient(180deg, var(--bg1), var(--bg2));
    color:var(--text); font:16px/1.5 system-ui,Segoe UI,Roboto,Ubuntu;
  }
  .wrap{min-height:100%;display:flex;flex-direction:column}
  header{display:flex;gap:12px;align-items:center;justify-content:flex-end;padding:14px 20px}
  header .hello{color:#cbd5e1;font-weight:600}
  header a, header button{
    color:#cbd5e1;text-decoration:none;padding:6px 10px;border-radius:10px;border:1px solid #334155;background:transparent;cursor:pointer
  }
  header a:hover, header button:hover{background:#1f2937}

  .hero{flex:1;display:grid;place-items:center;padding:40px 16px}
  .panel{
    width:min(920px,94vw); background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border:1px solid #2a2f3a; border-radius:20px; padding:36px; box-shadow:0 20px 50px rgba(0,0,0,.35);
  }
  .logo{display:flex;align-items:center;gap:12px;justify-content:center;margin-bottom:8px}
  .logo svg{width:34px;height:34px;filter:drop-shadow(0 2px 10px rgba(139,92,246,.45))}
  .brand{
    font-weight:900; font-size:40px; letter-spacing:.5px;
    background:linear-gradient(90deg,var(--accent1),var(--accent2));
    -webkit-background-clip:text;background-clip:text;color:transparent;
  }
  .tag{color:#c7c7d1;text-align:center;margin:6px 0 26px;font-weight:600;opacity:.9}
  .group{margin-top:18px;border:1px solid #2f3542;border-radius:16px;padding:22px 18px;background:rgba(17,24,39,.55)}
  .group h3{margin:0 0 12px;font-size:15px;color:#c7bfff;display:flex;align-items:center;gap:8px}
  .input{display:flex;align-items:center;gap:12px;background:#0f172a;border:1px solid #2a2f3a;border-radius:12px;padding:10px 12px}
  .input input{flex:1;background:transparent;border:0;outline:none;color:var(--text);font-size:16px;padding:10px 6px}
  .dot{width:10px;height:10px;border-radius:50%;background:#a78bfa;box-shadow:0 0 0 3px rgba(167,139,250,.25)}
  .actions{display:flex;gap:14px;flex-wrap:wrap;margin-top:18px}
  .btn{
    appearance:none;border:1px solid #2a2f3a;background:var(--btn);color:#e5e7eb;
    padding:14px 18px;border-radius:12px;cursor:pointer;font-weight:700;min-width:260px
  }
  .btn:hover{background:var(--btnHover)}
  .btn.primary{background:linear-gradient(90deg,#7c3aed,#2563eb);border-color:#5b21b6}
  .note{margin-top:10px;color:#b6b6c3;font-size:13.5px}
  .peso{display:inline-flex;align-items:center;gap:8px}
  .peso span{background:#0b1220;padding:2px 8px;border:1px solid #4338ca;border-radius:999px;font-size:12.5px}
  .btn:focus,.input:focus-within{outline:2px solid transparent;box-shadow:0 0 0 4px rgba(139,92,246,.35)}
  footer{padding:14px 18px;color:#94a3b8;text-align:center;font-size:13px}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="hello">Hola, <strong id="uname">inicia sesiÃ³n con Google</strong></div>
      <button id="btn-google" type="button">Iniciar con Google</button>
      <button id="btn-logout" type="button">Salir</button>
    </header>

    <section class="hero">
      <div class="panel">
        <div class="logo">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2l3.5 6h6.5l-5.3 4 2 7L12 15l-6.7 4 2-7L2 8h6.5z"/></svg>
          <div class="brand">BauzaGPT</div>
        </div>
        <p class="tag">Ten en cuenta que puedes encontrar o ver cosas que te pueden llevar a la depresiÃ³n.</p>

        <div class="group">
          <h3>ðŸŽ¯ Target de bÃºsqueda</h3>
          <div class="input">
            <input id="q" placeholder="ejemplo.com, nombre de empresa, email, etc." autocomplete="off"/>
            <div class="dot"></div>
          </div>
          <div class="actions">
            <button class="btn" id="btnSimple">ðŸ”Ž BÃºsqueda sencilla</button>
            <button class="btn primary peso" id="btnPremium">ðŸ’² BÃºsqueda Premium <span>20 MXN</span></button>
          </div>
          <div class="note">La bÃºsqueda Premium genera un informe en PDF con enlaces indexados (fotos, videos, redes sociales, telÃ©fonos, etc.).</div>
        </div>
      </div>
    </section>

    <footer>Â© <span id="y"></span> BAUZA GPT â€” OSINT legal en MX</footer>
  </div>

  <!-- ====================== SCRIPTS ====================== -->

  <!-- (1) NavegaciÃ³n del sitio -->
  <script>
    // AÃ±o en footer y navegaciÃ³n bÃ¡sica
    document.getElementById('y').textContent = new Date().getFullYear();
    const input = document.getElementById('q');
    document.getElementById('btnSimple').onclick = () => {
      const q = encodeURIComponent((input.value || '').trim());
      if (!q) return alert('Escribe un target');
      window.location.href = './resultado.html?q=' + q;
    };
  </script>

  <!-- (2) Firebase Auth (Google) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut }
      from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

    // Config real (tu proyecto)
    const firebaseConfig = {
      apiKey: "AIzaSyD3a7cv735RQPYsXMdn4KWQ-NDugL7WyfI",
      authDomain: "studio-6473341422-75630.firebaseapp.com",
      projectId: "studio-6473341422-75630",
      storageBucket: "studio-6473341422-75630.firebasestorage.app",
      messagingSenderId: "240684953453",
      appId: "1:240684953453:web:6027f3b025c9ee22e8b464"
    };

    const app  = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const prov = new GoogleAuthProvider();

    // Exponer 'auth' para usarlo en el script de Stripe (prefilled_email/client_reference_id)
    window.auth = auth;

    const uname     = document.querySelector("#uname");
    const btnLogin  = document.querySelector("#btn-google");
    const btnLogout = document.querySelector("#btn-logout");

    btnLogin?.addEventListener('click', async (e) => {
      e.preventDefault();
      try {
        const { user } = await signInWithPopup(auth, prov);
        uname.textContent = user.displayName || "usuario";
        alert("Â¡Inicio de sesiÃ³n correcto!");
      } catch (e) {
        console.error(e);
        alert("Inicio de sesiÃ³n cancelado o fallido");
      }
    });

    btnLogout?.addEventListener('click', async (e) => {
      e.preventDefault();
      await signOut(auth);
      uname.textContent = "inicia sesiÃ³n con Google";
    });

    onAuthStateChanged(auth, (user) => {
      if (user) uname.textContent = user.displayName || "usuario";
    });
  </script>

  <!-- (3) Stripe Payment Link (BÃºsqueda Premium) -->
  <script type="module">
    // Payment Link LIVE de Stripe
    const STRIPE_PAYMENT_LINK = "https://buy.stripe.com/14A4gz7346BF0Pf5So6c000";

    document.getElementById('btnPremium').onclick = async () => {
      const qEl = document.getElementById('q');
      const qRaw = qEl ? qEl.value : "";
      const q = (qRaw || "").trim();
      if (!q) return alert("Escribe un target de bÃºsqueda");

      // Si el usuario estÃ¡ logueado, prellenamos email y pasamos uid como referencia
      let email = "", uid = "";
      try {
        const user = window.auth?.currentUser;
        if (user) { email = user.email || ""; uid = user.uid || ""; }
      } catch (e) {
        console.warn("No se pudo leer el usuario de Firebase:", e);
      }

      // Enviar datos a Stripe:
      // - locale: interfaz en espaÃ±ol (LatAm)
      // - prefilled_email: mejora conversiÃ³n (si hay)
      // - client_reference_id: lo recibes en tu webhook (uid o, si no hay login, el target q)
      const params = new URLSearchParams({
        locale: "es-419",
        ...(email ? { prefilled_email: email } : {}),
        ...(uid ? { client_reference_id: uid } : { client_reference_id: q })
      });

      window.location.href = `${STRIPE_PAYMENT_LINK}?${params.toString()}`;
    };
  </script>

  <!-- ==================== FIN SCRIPTS ==================== -->
</body>
</html>
