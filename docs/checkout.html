<!doctype html><html lang="es"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Checkout â€” BauzaGPT</title>
<link rel="stylesheet" href="./estilos.css"></head>
<body class="wrap" style="max-width:720px;margin:3rem auto">
<h1>Pago â€” BÃºsqueda Pro (20 MXN)</h1>
<label>Email para tu cuenta</label>
<input id="email" type="email" style="width:100%;padding:.6rem" placeholder="tu@email.com">
<label style="margin-top:.8rem;display:block">Consulta (opcional)</label>
<input id="q" type="text" style="width:100%;padding:.6rem" placeholder="Nombre, @usuario, correo...">
<button id="pay" class="btn primary" style="margin-top:1rem">Ir a pagar</button>
<p id="msg" class="mini"></p>
<script>
  const qs = new URLSearchParams(location.search);
  const qParam = qs.get('q'); if (qParam) document.getElementById('q').value = qParam;

  document.getElementById('pay').onclick = async () => {
    const email = document.getElementById('email').value.trim();
    const query = document.getElementById('q').value.trim();
    if (!email) { document.getElementById('msg').textContent='Pon tu email ðŸ“¨'; return; }
    document.getElementById('pay').disabled = true;

    // ðŸ‘‡ Cambia a tu dominio de Vercel si es distinto
    const API = 'https://REEMPLAZA.vercel.app/api/create-checkout-session';

    try {
      const resp = await fetch(API, {
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ email, plan:'pro', query })
      });
      const data = await resp.json();
      if (data.url) location.href = data.url;
      else document.getElementById('msg').textContent = 'No se pudo iniciar pago.';
    } catch {
      document.getElementById('msg').textContent = 'Error de red.';
    } finally {
      document.getElementById('pay').disabled = false;
    }
  };
</script>
</body></html>
